upgradeInfo:
  - seq: 1
    config: |-
      当前版本的升级功能，需要 Elasticsearch 的支持，继续下一步之前，请先准备好 Elasticsearch 实例，并在右上角的 **Elasticsearch** 菜单中，按以下模板，增加 Elasticsearch 的实例配置信息：

      ```yaml
      ssl:  True
      host: 192.168.0.1
      port: 9200
      user: elastic
      password: 123456
      ```

      在升级完成，并全部服务启动之后，进入 launcher 容器，执行以下命令，初始化所有工作空间的 ES RP 信息：

      ```shell
      curl http://inner.forethought-core:5000/api/v1/inner/es/init -H "Content-Type:application/json" -X POST
      ```

  - seq: 2
    config: |-
      升级完成后，执行以下命令刷 ES 索引，禁用日期格式字符串自动转换成日期类型，执行前替换 Elasticsearch host、user、password：

      ```shell
      curl -XPOST "http://es-cn-stxxxx.elasticsearch.aliyuncs.com:9200/wksp_*/_mapping" -u user:password -H 'Content-Type: application/json' -d'{ "date_detection": false }'
      ```

      在升级完成，并全部服务启动之后，进入 launcher 容器，执行以下命令，重新初始化 ES 模板：

      ```shell
      curl http://inner.forethought-core:5000/api/v1/inner/es/init -H "Content-Type:application/json" -X POST
      ```

  - seq: 3
    config: |-
      进入集群 launcher 容器，执行以下命令，更新概览图指标卡标题：

      ```shell
      curl -H "Content-Type:application/json" -X POST 'http://inner.forethought-core:5000/api/v1/inner/upgrade/fix_data?script_name=fix_singlestat_chart_name'
      ```

      执行以下命令，更新 ES 索引模板：

      ```shell
      curl -H "Content-Type:application/json" -X POST 'http://inner.forethought-core:5000/api/v1/inner/es/init'
      ```