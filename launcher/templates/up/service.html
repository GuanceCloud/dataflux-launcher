{% extends "base.html" %}

{% block content %}

<div class="row form-body">
  <div class="col-12">
    <div class="form-horizontal">
      <h2 class="page-heading">{{ title }}</h2>

      {% for ns in pageData %}
      <div class="high-block">
        <h5>命名空间：{{ ns.namespace }}</h5>
        {% for item in ns.services %}

          {% if item.fullImagePath != item.newImagePath or item.replicas != item.availableReplicas %}
          <div class="form-group app-image" id="img_{{ item.key }}">
            <label class="col-sm-2 control-label">{{ item.name }}:</label>
            <div class="col-sm-10 text-right service-status">
              <p class="form-control-static old">
                <span id="old_img_path_{{ item.key }}">
                  {{ item.fullImagePath }}
                </span>
                {% if item.newImagePath != item.fullImagePath %}
                  {% if item.replicas == 0 or item.replicas > item.availableReplicas %}
                    <i class="service-pendding"></i>
                  {% elif item.replicas > 0 or item.replicas == item.availableReplicas %}
                    <i class="icon-success"></i>
                  {% endif %}
                {% else %}
                  <i class="glyphicon glyphicon-ban-circle"></i>
                {% endif %}
              </p>
              <p class="form-control-static">
                <i class="text-warning glyphicon glyphicon-arrow-down"></i>
              </p>
              <p class="form-control-static new">
                <span class="text-warning" id="new_img_path_{{ item.key }}">
                  {{ item.newImagePath }}
                </span>
                {% if item.newImagePath == item.fullImagePath %}
                  {% if item.replicas == 0 or item.replicas > item.availableReplicas %}
                    <i class="service-pendding"></i>
                  {% elif item.replicas > 0 or item.replicas == item.availableReplicas %}
                    <i class="icon-success"></i>
                  {% endif %}
                {% else %}
                  <i class="text-warning glyphicon glyphicon-ban-circle"></i>
                {% endif %}
              </p>

            </div>
          </div>
          {%endif%}

        {%endfor%}

      </div>
      {%endfor%}

    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">&nbsp;</label>
      <div class="col-sm-10">
          <button class="btn btn-primary" onclick="setup.up_service_update()">
            确认升级
          </button>
          <a class="btn btn-default" href="/check">上一步</a>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript">

$().ready(function(){
  setup.up_service_status();
});

</script>


{% endblock %}

