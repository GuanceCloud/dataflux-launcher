{% extends "base.html" %}

{% block content %}

<div class="row form-body">
  <h2 class="page-heading">{{ title }}</h2>

  {% for project, val in pageData.items() %}
  <div class="high-block">
    <h5>项目：{{ project }}（命名空间：{{ val.namespace }}）</h5>
    <div class="upgrade-sql-list" data-project="{{ project }}">
        {% if val.sqls | length == 0 %}
        <div class="high-block-sm">
          <h5># 无数据库更新</h5>
        </div>
        {% endif %}

        {% for item in val.sqls %}
        <div class="db-update-item">
          <h5></h5>
          <pre>-- 版本：{{ item.seq }}<br />{{ item.content }}</pre>
        </div>
        {% endfor %}
    </div>
  </div>
  {% endfor %}
</div>

<div class="row form-body">
    <div class="form-group">
      <label class="col-sm-2 control-label">&nbsp;</label>
      <div class="col-sm-10">
        {% if not noUpdate %}
        <button id="btnDatabaseUpdate" class="btn btn-primary" onclick="setup.database_update()">
          确认升级，并重启所有应用
        </button>
        {% endif %}

        {% if noUpdate %}
        <button id="btnRedeployAll" class="btn btn-primary" onclick="setup.redeploy_all()">
          无数据库升级，重启所有应用（如果没有配置更新，可以不重启）
        </button>
        {% endif %}
          <!-- <a id="btnNext" class="btn btn-default" disabled="disabled" href="/up/configmap">
            下一步
          </a> -->
      </div>
    </div>

  </div>
</div>


{% endblock %}


